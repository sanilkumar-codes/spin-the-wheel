<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Spin the Wheel</title>
<style>
body { display:flex; flex-direction:column; align-items:center; justify-
content:center; min-height:100vh; font-family:Arial, sans-serif; margin:0;
background:#f7f7f7; }
.container { max-width:420px; width:100%; padding:20px; box-sizing:border-
box; text-align:center; }
#logo { max-width:160px; margin-bottom:10px; }
#form, #game { display:none; }
#wheel { width:320px; height:320px; border-radius:50%; border:6px solid
#444; margin:10px auto; position:relative; overflow:hidden; transition:
transform 5s cubic-bezier(.33,1,.68,1); }
.segment { position:absolute; width:50%; height:50%; top:50%; left:50%;
transform-origin:0% 0%; text-align:center; line-height:160px; color:#fff; font-
weight:bold; }
#pointer { width:0;height:0;border-left:18px solid transparent;border-right:
18px solid transparent;border-bottom:28px solid #e53935;margin:8px auto 0; }
button { padding:10px 20px; border:none; border-radius:6px;
background:#1976d2; color:#fff; font-size:16px; cursor:pointer; }
input { padding:8px; width:100%; margin:6px 0; box-sizing:border-box; }
#result { margin-top:12px; }
canvas.confetti { position:fixed; top:0; left:0; pointer-events:none; }
</style>
</head>
<body>
<div class="container">
<img id="logo" src="assets/logo.png" alt="Logo (replace assets/logo.png)" />
<div id="form">
<h3>Enter your details</h3>
<input id="name" placeholder="Name" />
<input id="contact" placeholder="Contact number" />
<button id="continueBtn">Continue</button>
</div>
<div id="game">
<div id="pointer"></div>
<div id="wheel"></div>
<button id="spinBtn">ðŸŽ¡ Spin</button>
<div id="result"></div>
</div>
</div>
<canvas class="confetti" id="confetti"></canvas>
<script>
// --- Edit gifts here ---
const gifts = ["Gift Card", "Headphones", "T-Shirt", "Mug", "Pen", "Discount
Coupon"];
// Build wheel
const wheel = document.getElementById('wheel');
const num = gifts.length;
for (let i = 0; i < num; i++) {
const seg = document.createElement('div');
seg.className = 'segment';
const angle = 360 / num;
seg.style.transform = `rotate(${angle * i}deg) skewY(${90 - angle}deg)`;
seg.style.background = i % 2 === 0 ? '#1976d2' : '#ef6c00';
seg.innerHTML = `<span style="display:inline-block; transform: skewY(-${90 -
angle}deg) rotate(${angle/2}deg);">${gifts[i]}</span>`;
wheel.appendChild(seg);
}
let spinning = false;
function spin() {
if (spinning) return;
spinning = true;
const spins = 5 + Math.floor(Math.random() * 4); // 5-8 full spins
const randomDeg = Math.floor(Math.random() * 360);
const deg = spins * 360 + randomDeg;
wheel.style.transform = `rotate(${deg}deg)`;
setTimeout(async () => {
const landed = deg % 360;
const segmentSize = 360 / num;
const idx = Math.floor((num - (landed / segmentSize)) % num);
const prize = gifts[idx];
document.getElementById('result').innerText = `ðŸŽ‰ You won: ${prize}`;
launchConfetti();
// send to backend
await fetch('/saveResult', { method:'POST', headers:{'Content-
Type':'application/json'}, body: JSON.stringify({ prize }) });
spinning = false;
}, 5200);
}
// Confetti (simple)
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth; canvas.height = window.innerHeight;
let confetti = [];
function launchConfetti(){
confetti = Array.from({ length: 120 }, () => ({ x:
Math.random()*canvas.width, y: Math.random()*-canvas.height, r:
Math.random()*6+4, s: Math.random()*3+2, d: Math.random()*Math.PI*2 }));
requestAnimationFrame(draw);
}
function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
confetti.forEach(c => { ctx.beginPath(); ctx.arc(c.x, c.y, c.r, 0,
Math.PI*2); ctx.fillStyle = `hsl(${Math.random()*360},100%,50%)`; ctx.fill();
c.y += c.s; if (c.y > canvas.height) c.y = -10; });
requestAnimationFrame(draw);
}
// Flow: on load check if user already played
window.onload = async () => {
try {
const res = await fetch('/checkUser');
const data = await res.json();
if (data.alreadyPlayed) {
document.getElementById('game').style.display = 'block';
document.getElementById('result').innerText = `You already won: $
{data.prize || 'â€”'}`;
} else {
document.getElementById('form').style.display = 'block';
}
} catch (e) {
// still show form if backend unreachable
document.getElementById('form').style.display = 'block';
}
}
// Submit details
document.getElementById('continueBtn').addEventListener('click', async () => {
const name = document.getElementById('name').value.trim();
const contact = document.getElementById('contact').value.trim();
if (!name || !contact) return alert('Please enter name and contact');
await fetch('/register', { method:'POST', headers:{'Content-
Type':'application/json'}, body: JSON.stringify({ name, contact }) });
document.getElementById('form').style.display = 'none';
document.getElementById('game').style.display = 'block';
});
// Spin button
document.getElementById('spinBtn').addEventListener('click', spin);
</script>
</body>
</html>
